# Mathematical Framework: Discrete Dynamical Systems on Hypercubes

**Course**: Math 538 - Discrete Dynamical Systems & Chaos Theory

## 1. Introduction

This document formalizes the mathematical framework for analyzing trajectories of move sequences on N-dimensional Rubik's cubes as discrete dynamical systems.

## 2. Definitions

### 2.1 State Space

Let $S$ be the **state space** of a puzzle, consisting of all possible configurations of pieces. For a Rubik's cube:

- **3×3×3 Cube**: $|S| \approx 4.3 \times 10^{19}$ states
- **4D 3×3×3×3 Hypercube**: $|S|$ is exponentially larger (exact value depends on piece structure)

Each state $s \in S$ can be represented as:

$$s = (p_1, o_1, p_2, o_2, \ldots, p_n, o_n)$$

where:

- $p_i$ = position of piece $i$
- $o_i$ = orientation of piece $i$

### 2.2 Move Group

Let $G$ be the **puzzle group** generated by basic moves $\{m_1, m_2, \ldots, m_k\}$. Each move $m_i: S \to S$ is a bijection (permutation) with:

$$m_i^{-1} \circ m_i = \text{id}$$

The group structure ensures:

1. Every move is reversible
2. Composition of moves is well-defined
3. The identity (solved state) exists

## 3. Discrete Dynamical System

### 3.1 Defining the Map

Given a **move sequence** $M = (m_1, m_2, \ldots, m_k)$, define the **composite map**:

$$T_M: S \to S$$

$$T_M(s) = m_k \circ m_{k-1} \circ \cdots \circ m_1(s)$$

**Example**: For $M = (R, U)$ on a 3×3×3 cube, $T_M(s)$ means "apply R, then apply U to the result."

### 3.2 Trajectory

Starting from initial state $s_0 \in S$ (typically the solved state), the **trajectory** is:

$$\Gamma(s_0) = \{s_0, s_1, s_2, \ldots\}$$

where $s_{n+1} = T_M(s_n)$ for all $n \geq 0$.

Since $|S| < \infty$, every trajectory eventually repeats:

$$\exists \, \tau, p \in \mathbb{N}: s_{\tau + p} = s_\tau$$

where:

- $\tau$ = **transient length** (iterations before entering cycle)
- $p$ = **period** (cycle length)

## 4. Periodicity and Cycles

### 4.1 Pure Periodic Orbits

If $s_p = s_0$, the trajectory is **purely periodic** with period $p$:

$$T_M^p(s_0) = s_0$$

This means $M$ repeated $p$ times returns to the initial state.

**Example from experiments**:

- 2×2×2 with $(R,U)$: period = 30
- 3×3×3 with $(R,U)$: period = 840

### 4.2 Eventually Periodic Orbits

If $s_{\tau} = s_{\tau + p}$ but $\tau > 0$, the trajectory has a transient before entering a cycle.

In our experiments, $\tau = 0$ for all tested move sequences, indicating:

$$T_M^p(s_0) = s_0$$

This is expected since starting from the solved state, moves preserve group structure.

## 5. Complexity Measures

### 5.1 Orbit Size

The **orbit size** is:

$$|\text{Orbit}(s_0)| = \tau + p$$

For purely periodic trajectories ($\tau = 0$), this equals the period $p$.

### 5.2 Scaling Across Dimensions

Define the **complexity scaling factor**:

$$\alpha_{d_1 \to d_2} = \frac{p_{d_2}}{p_{d_1}}$$

where $p_d$ is the period for dimension $d$.

**From experiments**:

| Transition    | Move Seq    | $\alpha$ | Interpretation      |
| ------------- | ----------- | -------- | ------------------- |
| 2×2×2 → 3×3×3 | R,U         | 28.0     | Dramatic increase   |
| 3D → 4D (2×2) | R,U → OF,OU | 0.2      | Surprising decrease |

### 5.3 Chaos Indicators

For infinite state spaces, chaos is characterized by:

1. **Sensitive dependence** on initial conditions
2. **Topological mixing**
3. **Dense periodic orbits**

For finite state spaces (puzzles), we look for:

1. **Large periods** relative to state space size
2. **Non-commuting moves** leading to complex behavior
3. **Irregular scaling** across dimensions

## 6. The OF-OU Anomaly

### 6.1 Observed Behavior

For 4D hypercubes with moves $(OF, OU)$:

- Both 2×2×2×2 and 3×3×3×3 have period = 6
- This is independent of puzzle size!

### 6.2 Mathematical Explanation

This suggests $OF$ and $OU$ satisfy a special relationship:

$$(OU \circ OF)^6 = \text{id}$$

Possible explanations:

1. **Commutation**: If $[OF, OU] \approx 0$, they nearly commute
2. **Small order**: $(OF \circ OU)$ has order 6 in the group
3. **Geometric alignment**: OF and OU might affect orthogonal subspaces

**Hypothesis**: Let $G_4$ be the 4D hypercube group. If $OF$ and $OU$ generate a subgroup $H < G_4$ with $|H| = 6$, then:

$$\text{Orbit}(s_0, \{OF, OU\}) = H \cdot s_0$$

has size at most 6, regardless of puzzle size.

## 7. State Space Hashing

### 7.1 Challenge

Puzzle states cannot be directly compared since `BoxDynPuzzleState` is a trait object. We need a canonical representation.

### 7.2 Solution

Extract piece transforms from render data:

$$h(s) = \text{SHA256}(\{T_{p_1}, T_{p_2}, \ldots, T_{p_n}\})$$

where $T_{p_i} \in SE(n)$ is the transformation (position + orientation) of piece $i$.

**Properties**:

- **Deterministic**: Same state always gives same hash
- **Collision-resistant**: Different states (almost) never collide
- **Dimension-agnostic**: Works for 3D, 4D, or higher dimensions

## 8. Implications for Chaos Theory

### 8.1 Why Study Puzzle Dynamics?

1. **Finite approximations** of continuous systems
2. **Explicit group structure** enables rigorous analysis
3. **High-dimensional** state spaces model complex phenomena
4. **Discrete symmetries** connect to crystallography, physics

### 8.2 Connections to Classical Chaos

| Continuous System | Puzzle Analogue           |
| ----------------- | ------------------------- |
| Poincaré map      | Single iteration of $T_M$ |
| Strange attractor | Long-period orbit         |
| Lyapunov exponent | Growth rate of orbit size |
| Phase space       | Puzzle state space $S$    |

### 8.3 Open Questions

1. **What move sequences maximize period** on 4D hypercubes?
2. **Do non-trivial transients exist** for certain starting states?
3. **How does period scale** with move sequence length?
4. **Can we prove** $\alpha_{3D \to 4D} > 1$ for some moves?

## 9. Algorithm Complexity

### 9.1 Time Complexity

For detecting cycles up to period $P$:

- **Time**: $O(P \cdot (T_M + H))$
  - $T_M$ = time to apply move sequence
  - $H$ = time to hash state

For our implementation:

- $T_M \approx O(n)$ where $n$ = number of pieces
- $H \approx O(n)$ for SHA256 of piece data

**Total**: $O(P \cdot n)$ per exploration

### 9.2 Space Complexity

- **HashMap storage**: $O(P)$ entries
- **Each entry**: hash (32 bytes) + iteration (8 bytes)

**Total**: $O(P)$ space, acceptable for $P \leq 10^6$

## 10. Future Mathematical Extensions

### 10.1 Lyapunov Exponent for Puzzles

Define a **discrete Lyapunov exponent**:

$$\lambda = \lim_{n \to \infty} \frac{1}{n} \log d(T_M^n(s_1), T_M^n(s_2))$$

where $d(s, s')$ = minimum move distance between states.

**Challenge**: Efficiently computing $d(\cdot, \cdot)$ on puzzles is NP-hard (related to God's number).

### 10.2 Symbolic Dynamics

Map puzzle states to **symbol sequences** based on which pieces are affected:

$$\Sigma: S \to \{0,1\}^k$$

Then analyze the **shift map** $\sigma$ on symbol space.

### 10.3 Topological Entropy

Define entropy as:

$$h_{\text{top}}(T_M) = \lim_{n \to \infty} \frac{1}{n} \log N_n$$

where $N_n$ = number of distinguishable $n$-step trajectories.

**Interpretation**: High entropy $\Rightarrow$ complex/chaotic dynamics.

## 11. Conclusion

This framework provides a rigorous foundation for studying discrete dynamical systems on hyperdimensional puzzles. Key insights:

1. **Finite state spaces** guarantee periodic behavior
2. **Move selection** critically affects complexity
3. **Higher dimensions** don't automatically mean longer periods
4. **Geometric structure** of moves determines dynamics

The unexpected simplicity of OF-OU on 4D cubes highlights the importance of **move geometry**, not just state space size, in determining trajectory complexity.

---

## References

1. Devaney, R. L. (2003). _An Introduction to Chaotic Dynamical Systems_
2. Joyner, D. (2008). _Adventures in Group Theory: Rubik's Cube, Merlin's Machine_
3. Rokicki, T. et al. (2014). _The diameter of the Rubik's Cube group is twenty_
4. Strogatz, S. H. (2015). _Nonlinear Dynamics and Chaos_

**Author**: [Your Name]
**Course**: Math 538 - Discrete Dynamical Systems & Chaos
**Date**: December 2025
